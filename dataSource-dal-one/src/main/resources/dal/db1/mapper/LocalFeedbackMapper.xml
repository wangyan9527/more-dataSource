<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dal.db1.mapper.LocalFeedbackMapper">
    <resultMap id="BaseResultMap" type="entity.feedback.Feedback">
        <!-- WARNING - @mbg.generated -->
        <id column="ID" jdbcType="BIGINT" property="id" />
        <result column="FEEDBACK_NO" jdbcType="VARCHAR" property="feedbackNo" />
        <result column="CLASS_ID" jdbcType="BIGINT" property="classId" />
        <result column="STATUS" jdbcType="TINYINT" property="status" />
        <result column="REMARK" jdbcType="VARCHAR" property="remark" />
        <result column="STUDENT_SUGGESTION" jdbcType="VARCHAR"
                property="studentSuggestion" />
        <result column="QUIT_REASON" jdbcType="VARCHAR" property="quitReason" />
        <result column="EFFCT_DESC" jdbcType="VARCHAR" property="effctDesc" />
        <result column="SUBSCHOOL_SUGGEST" jdbcType="VARCHAR" property="subschoolSuggest" />
        <result column="TEACH_AGAIN_SUGGESTION" jdbcType="VARCHAR"
                property="teachAgainSuggestion" />
        <result column="TITLE" jdbcType="VARCHAR" property="title" />
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime" />
        <result column="FEEDBACK_TIME" jdbcType="TIMESTAMP" property="feedbackTime" />
        <result column="CREATOR_ID" jdbcType="BIGINT" property="creatorId" />
    </resultMap>
    <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs"
               type="entity.feedback.Feedback">
        <!-- WARNING - @mbg.generated -->
        <result column="SNAPSHOT" jdbcType="LONGVARCHAR" property="snapshot" />
    </resultMap>
    <sql id="Example_Where_Clause">
        <!-- WARNING - @mbg.generated -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and
                                    #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem"
                                             open="(" separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!-- WARNING - @mbg.generated -->
        ID, FEEDBACK_NO, CLASS_ID, `STATUS`,  REMARK,
        STUDENT_SUGGESTION, QUIT_REASON,
        EFFCT_DESC, SUBSCHOOL_SUGGEST, TEACH_AGAIN_SUGGESTION, TITLE, CREATE_TIME,
        UPDATE_TIME,
        FEEDBACK_TIME, CREATOR_ID, SNAPSHOT
    </sql>
    <sql id="Blob_Column_List">
        <!-- WARNING - @mbg.generated -->
        SNAPSHOT
    </sql>

    <insert id="insertBatch">
        insert into FEED_BACK VALUES
        <foreach collection="list" separator="," item="item">
            (#{item.id}, #{item.feedbackNo}, #{item.classId}, #{item.status}, #{item.remark},
            #{item.studentSuggestion}, #{item.quitReason}, #{item.effctDesc}, #{item.subschoolSuggest},
            #{item.teachAgainSuggestion}, #{item.title}, #{item.snapshot}, #{item.createTime},
            #{item.updateTime}, #{item.feedbackTime}, #{item.creatorId})
        </foreach>
    </insert>


    <select id="queryList" resultMap="BaseResultMap">
        select <include refid="Base_Column_List"/>
        from FEED_BACK
        <where>
            ID BETWEEN #{startId} and #{endId}
            and STATUS=7
        </where>
    </select>

    <select id="queryListByIds" resultMap="BaseResultMap">
        select <include refid="Base_Column_List"/> from FEED_BACK
        <where>
            ID in
            <foreach collection="collection" close=")" open="(" separator="," item="item">
                #{item}
            </foreach>
        </where>
    </select>

</mapper>